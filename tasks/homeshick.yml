---
- name: clone homeshick repo
  git:
    repo: git://github.com/andsens/homeshick.git
    dest: "~{{username}}/.homesick/repos/homeshick"
    accept_hostkey: true

# bashrc is version-controlled already, so don't force this
#- name: add homeshick initialization to bashrc
#  lineinfile: dest=~{{username}}/.bashrc line="source $HOME/.homesick/repos/homeshick/homeshick.sh" regexp='homeshick'

- name: clone dotfiles repo
  git:
    repo: "{{dotfiles_repo}}"
    dest: "~{{username}}/.homesick/repos/dotfiles"
    accept_hostkey: true

- name: create symlinks for dotfiles
  command: ~{{username}}/.homesick/repos/homeshick/bin/homeshick link dotfiles -f -q
